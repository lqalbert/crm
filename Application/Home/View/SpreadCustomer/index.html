<extend name="Common:base"/>
<block name="head">

</block>
<block name="body">
  <div id="app" class="container">
    <div class="wrapp" v-show="show" style="display:none;">

      <el-row>
        <el-col :span="24">
          <el-form :inline="true" ref="searchForm" :model="searchForm">
            <el-form-item>
            <el-select size="small" style="width:120px;" clearable v-model="searchForm.type" placeholder="查询类型">
              <el-option v-for="item in searchGroup" :label="item.name" :value="item.value">
              </el-option>
            </el-select>
          </el-form-item>

            <el-form-item>
              <el-button type="info" size="small" icon="search" @click="loadDatalist">查询</el-button>
              <el-tooltip content="清空搜索框并刷新表格数据" placement="bottom-start">
                <el-button size="small" @click="resetBack" style="margin-left:10px;">重置</el-button>
              </el-tooltip>
            </el-form-item>
            <el-form-item>
              <el-tooltip content="点击刷新当前页面" placement="right">
                <el-button @click="refresh" size="small" type="danger">刷新</el-button>
              </el-tooltip>
            </el-form-item>
          </el-form>
        </el-col>
      </el-row>
      <el-row>
        <el-col :span="24">
          <el-table 
          :data="dataList" 
          border highlight-current-row
          v-loading="dataLoad" 
          element-loading-text="{:L('DATA_LOGIN')}"
         >
                    <el-table-column label="序号"  align="center" width="65" :formatter="handleIndex"  >
                    </el-table-column>
                    <el-table-column  align="center" prop="name"  label="客户"   width="150">
                    </el-table-column>
                    <el-table-column   align="center" prop="spread_name" label="推广部"  >
                    </el-table-column>
                    <el-table-column   align="center" prop="sale_name" label="销售部"  >
                    </el-table-column>
          </el-table>
        </el-col>
      </el-row>
      <el-row type="type" justify="start" align="middle" class="row-bg">
        <el-col :span="12">
              <div class="grid-content bg-purple-light pull-right">
                <!-- page -->
                <include file="Common:_pagination" />
                <!-- / page -->
              </div>
        </el-col>
      </el-row>
    </div>
  </div>
</block>
<block name="scripts">
<script src="__PUBLIC__/js/calculate.js"></script>
  <script>
    // window.defaultOption.hooks.delAll('mounted');
    page.getGroupsUrl = "{:U('getGroups')}";
    window.defaultOption.setDatas({
      searchGroup:[{name:"已分配", value:1}, {name:"未分配", value:2}],
    }).setForm('search',{
      type:""
    }).setMethod('resetBack', function(){
      window.location.reload();
    })
  </script>
</block>