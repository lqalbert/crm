<extend name="Common:base"/>
<block name="head">
	<style>
	  .el-table .info-row {
	    background: #c9e5f5;
	  }

	  .el-table .positive-row {
	    background: #e2f0e4;
	  }
 </style>
</block>
<block name="body">
	<div class="container" id="app">
		<div v-show="show" class="wrapp" style="display:none">
		  <!-- table -->
		  <el-row>
		   <el-col :span="24">
			  <el-table :data="datalist" v-loading="loading" element-loading-text="拼命加载中" style="width: 100%" :row-class-name="tableRowClassName">
			    <el-table-column align="center" type="index" label="编号" width="100"></el-table-column>
			    <el-table-column align="center" prop="name" label="角色名称"></el-table-column>
			    <el-table-column align="center" prop="description" label="角色说明"></el-table-column>
			    <el-table-column inline-template align="center" label="当前状态">
							<el-switch
							  v-model="row.value1"
							  on-color="#13ce66"
							  off-color="#ff4949" @change="visibile">
							</el-switch>

			    </el-table-column>
			    <el-table-column align="center" prop="time" label="创建时间">
			    </el-table-column>
			    <el-table-column inline-template align="center" label="操作">
			     <div>
			        <el-button
			          size="small"
			          @click="handleEdit($index, row)">
			          修改
			        </el-button>
			        <el-button
			          size="small"
			          type="danger"
			          @click="handleDelete($index, row)">
			          删除
			        </el-button>
		       </div>
			    </el-table-column>
			  </el-table>
			 </el-col>
      </el-row>
      <!-- table -->
			<!-- toolbar -->
			<el-row type="type"  justify="space-between" align="middle"  class="row-bg">
			  <el-col :span="12">
			  <div class="grid-content bg-purple">
			  	<span class="wrapper">
			  		<el-tooltip content="添加新角色！" placement="right">
					    <el-button  @click="dialogAddRole = true" icon="plus" type="primary">添加</el-button>
				    </el-tooltip>
				  </span>
			  </div>
			  </el-col>
			</el-row>
			<!-- / toolbar -->
		</div>
		<div v-show="show" style="display:none">
			<!-- 添加 -->
			<include file="_add"/>
			<!-- 修改 -->
			<include file="_edit"/>
		</div>
	</div>
</block>
<block name="scripts">
	<script type="text/javascript">
		// vm option 里面的 data属性
		Oassign(window.vmData ,{
			value1:false,
			value2:'',
			loading: false,
			formLabelWidth: '140px',

			datalist:[{
				name:'掌控全局',
				description:'掌控大局相关的管理人员(总经理级别)',
				time:'2016-12-15',
				value1: true
			},{
				name:'区域管理',
				description:'各自片区、部门的总负责管理人员',
				time:'2016-12-15',
				value1: true
			},{
				name:'投资风控',
				description:'投资顾问、风险控制',
				time:'2016-12-15',
				value1: true
			},{
				name:'团队组长',
				description:'管理各自团队、小组的成员',
				time:'2016-12-15',
				value1: true
			},{
				name:'销售员工',
				description:'管理自己跟踪的客户及客户资料',
				time:'2016-12-15',
				value1: true
			},{
				name:'测试演示',
				description:'用于平台测试、演示的账号(人力资源培训)',
				time:'2016-12-15',
				value1: true
			},{
				name:'技术维护',
				description:'拥有所有的权限,一般为技术团队',
				time:'2016-12-15',
				value1: true
			}],
			//添加对话框
			dialogAddRole: false,
			//修改对话框
			dialogEditRole: false,
			sousuo:'',
			input:'区域一',
			//checked
			checkList:['员工列表','添加员工'],
			checkList1:['浏览角色','添加角色'],
			checkList2:['浏览权限','添加权限'],

			editForm:{
				description:""
			}
		});

		Oassign(window.vmOption, {
			//方法
			methods : {
	      tableRowClassName:function(row, index) {
	        if (index === 1) {
	          return 'info-row';
	        } else if (index === 3) {
	          return 'positive-row';
	        }
	        return '';
	      },
	      handleEdit:function(index, row){
	      	this.value2=row.name;
	      	this.editForm.description = row.description;
          this.dialogEditRole=true;
	      },
	      handleDelete:function(index, row){
	        this.$confirm('此操作将永久删除该角色, 是否继续?', '提示', {
	          confirmButtonText: '确定',
	          cancelButtonText: '取消',
	          type: 'warning'
	        }).then(function(){
	          this.$message({
	            type: 'success',
	            message: '删除成功!'
	          });
	        }).catch(function() {
	          this.$message({
	            type: 'info',
	            message: '已取消删除'
	          });          
	        });
	      },
	      visibile:function(){
            this.value1 = !this.value1;
	      }
			}
		})
	</script>
</block>